# أداة Termux Unpacker (بدون روت) - سكربت شامل

تهدف هذه الأداة إلى مساعدة المستخدمين في فك تشفير حمايات تطبيقات الأندرويد الشائعة مثل Arm加固، Fake/Real 360加固، و Dpt-Shell، وذلك باستخدام بيئة Termux على أجهزة الأندرويد التي لا تتطلب صلاحيات الروت. تم تجميع جميع الوظائف في سكربت Python واحد لسهولة الاستخدام.

## الميزات الرئيسية
*   **فك تشفير متعدد الحمايات**: تدعم الأداة فك تشفير حمايات Arm، 360 (Jiagu)، و Dpt-Shell بشكل أساسي عبر `Frida-DexDump`.
*   **بدون روت**: تعمل الأداة بالكامل في بيئة Termux دون الحاجة إلى صلاحيات الروت على جهاز الأندرويد.
*   **سهولة الاستخدام**: توفر واجهة سطر أوامر بسيطة لتسهيل عملية فك التشفير.
*   **تكامل الأدوات**: تستفيد من أدوات قوية مثل `Frida-DexDump` و `Apktool`.
*   **سكربت شامل**: جميع الوظائف مدمجة في ملف Python واحد (`termux_unpacker.py`).

## المكونات التقنية
تعتمد الأداة على مجموعة من الأدوات والتقنيات لتقديم وظائفها:

| المكون | الوصف | الاستخدام |
| :--- | :--- | :--- |
| **Python 3** | اللغة البرمجية الأساسية للسكربت الرئيسي. | تنسيق العمليات، واجهة المستخدم. |
| **OpenJDK 17** | بيئة تشغيل جافا. | لتشغيل `Apktool` و `dpt-shell` (إذا تم توفيره). |
| **Frida-tools** | إطار عمل للحقن الديناميكي. | للتواصل مع التطبيقات قيد التشغيل واستخراج ملفات DEX. |
| **Frida-DexDump** | أداة مبنية على Frida. | استخراج ملفات DEX من الذاكرة.
| **Apktool** | أداة لتفكيك وإعادة بناء ملفات APK. | لتعديل ملفات APK وحقن Frida Gadget (مستقبلاً)، وفحص الحماية. |

## كيفية التثبيت والاستخدام (خطوة بخطوة)

### 1. إعداد Termux

1.  **تنزيل Termux**: قم بتنزيل وتثبيت تطبيق Termux من [F-Droid](https://f-droid.org/packages/com.termux/) أو [متجر Google Play](https://play.google.com/store/apps/details?id=com.termux).
2.  **منح الأذونات**: عند فتح Termux لأول مرة، قد يطلب أذونات التخزين. اسمح له بذلك.
3.  **تحديث Termux**: افتح Termux وقم بتحديث الحزم الأساسية:
    ```bash
    pkg update -y && pkg upgrade -y
    ```

### 2. تنزيل سكربت الأداة

1.  قم بتنزيل ملف `termux_unpacker.py` إلى مجلدك الرئيسي في Termux:
    ```bash
    wget -O termux_unpacker.py https://raw.githubusercontent.com/your_repo/Termux-Unpacker/main/termux_unpacker.py
    ```
    **(ملاحظة: الرابط أعلاه هو مثال. ستحتاج إلى استبداله بالرابط الفعلي لسكربت `termux_unpacker.py` بعد رفعه إلى مستودع GitHub أو توفيره محليًا).**

### 3. تشغيل الأداة

1.  قم بتشغيل سكربت الأداة باستخدام Python:
    ```bash
    python termux_unpacker.py
    ```

2.  ستظهر لك قائمة الأداة الرئيسية:
    ```
    ====================================
      Termux Unpacker (No Root)
    ====================================
    [!] يرجى التأكد من تثبيت جميع المتطلبات قبل البدء (الخيار 1)

    1. تثبيت/تحديث المتطلبات (Dependencies)
    2. فك تشفير تطبيق (Frida-DexDump) - عام لمعظم الحمايات
    3. فك حماية 360/Jiagu (قيد التطوير - استخدم 2 حالياً)
    4. فك حماية Dpt-Shell (قيد التطوير - استخدم 2 حالياً)
    5. فحص حماية ملف APK (يتطلب Apktool)
    6. خروج
    ====================================
    [?] اختر عملية:
    ```

### 4. استخدام خيارات الأداة

*   **الخيار 1: تثبيت/تحديث المتطلبات (Dependencies)**
    *   اختر `1` واضغط Enter. سيقوم السكربت بتثبيت جميع الحزم والأدوات اللازمة (Python، Node.js، OpenJDK 17، Frida-tools، frida-dexdump، Apktool).
    *   **مهم**: هذه الخطوة ضرورية ويجب إجراؤها مرة واحدة على الأقل قبل استخدام أي وظيفة أخرى.

*   **الخيار 2: فك تشفير تطبيق (Frida-DexDump) - عام لمعظم الحمايات**
    *   اختر `2` واضغط Enter.
    *   سيُطلب منك إدخال اسم حزمة التطبيق (مثال: `com.whatsapp` أو `com.example.myapp`). يمكنك العثور على اسم الحزمة باستخدام تطبيقات مثل 
    *   سيُطلب منك إدخال اسم حزمة التطبيق (مثال: `com.whatsapp` أو `com.example.myapp`). يمكنك العثور على اسم الحزمة باستخدام تطبيقات مثل "Package Name Viewer" أو "App Info" من متجر Google Play.
    *   **مهم جداً**: تأكد من أن التطبيق الذي تريد فك تشفيره **يعمل حالياً** في الخلفية أو في الواجهة على جهاز الأندرويد الخاص بك.
    *   ستقوم الأداة بمحاولة الاتصال بـ `frida-server` (الذي يجب أن يكون يعمل على جهازك، أو يتم حقنه كـ `Frida Gadget` في التطبيق المستهدف) واستخراج ملفات DEX من الذاكرة.
    *   سيتم حفظ ملفات DEX المستخرجة في مجلد `termux_unpacker_output/<اسم_الحزمة>/` داخل مجلد Termux الرئيسي.

*   **الخيار 3: فك حماية 360/Jiagu (قيد التطوير - استخدم 2 حالياً)**
    *   هذا الخيار مخصص لفك حماية 360/Jiagu. حالياً، هو قيد التطوير ويتطلب دمج سكربتات متخصصة مثل `SafaSafari/jiagu_unpacker` [^1].
    *   **نصيحة**: يمكنك محاولة استخدام الخيار `2` (Frida-DexDump) لفك حماية 360/Jiagu، حيث أن العديد من هذه الحمايات تقوم بفك تشفير ملفات DEX في الذاكرة أثناء التشغيل.

*   **الخيار 4: فك حماية Dpt-Shell (قيد التطوير - استخدم 2 حالياً)**
    *   هذا الخيار مخصص لفك حماية Dpt-Shell. حالياً، هو قيد التطوير ويتطلب دمج أداة `dpt.jar` الرسمية أو سكربتات مخصصة [^2].
    *   **نصيحة**: يمكنك محاولة استخدام الخيار `2` (Frida-DexDump) لفك حماية Dpt-Shell، حيث أن العديد من هذه الحمايات تقوم بفك تشفير ملفات DEX في الذاكرة أثناء التشغيل.

*   **الخيار 5: فحص حماية ملف APK (يتطلب Apktool)**
    *   اختر `5` واضغط Enter.
    *   سيُطلب منك إدخال المسار الكامل لملف APK (مثال: `/sdcard/Download/app.apk`).
    *   ستقوم الأداة بتفكيك ملف APK جزئياً باستخدام `Apktool` والبحث عن مؤشرات شائعة للحمايات مثل `libjiagu.so` أو `libdpt.so`.
    *   هذا الفحص يعطي مؤشراً مبدئياً عن نوع الحماية، ولكنه ليس شاملاً وقد لا يكتشف جميع أنواع الحمايات.

*   **الخيار 6: خروج**
    *   لإنهاء الأداة.

## ملاحظات هامة
*   **Frida-Server/Frida Gadget**: لكي يعمل `Frida-DexDump`، يجب أن يكون `frida-server` يعمل على جهاز الأندرويد المستهدف (يتطلب روت)، أو يجب حقن `Frida Gadget` في التطبيق المستهدف (لا يتطلب روت ولكن يتطلب تعديل APK وإعادة توقيعه). هذا السكربت لا يقوم بحقن `Frida Gadget` تلقائياً حالياً، ولكنه يعتمد على أن `frida-server` يعمل أو أن `Frida Gadget` قد تم حقنه مسبقاً.
*   **الأداء**: قد تستغرق عمليات فك التشفير وقتاً طويلاً حسب حجم التطبيق وقوة جهازك.
*   **المسؤولية**: هذه الأداة مخصصة لأغراض البحث الأمني والتعليم فقط. المؤلف لا يتحمل أي مسؤولية عن أي استخدام غير قانوني أو غير أخلاقي للأداة.

## المساهمة
نرحب بالمساهمات لتحسين هذه الأداة. إذا كان لديك أي اقتراحات أو تحسينات، فلا تتردد في فتح مشكلة (issue) أو إرسال طلب سحب (pull request).

## الترخيص
هذه الأداة مرخصة تحت [MIT License](https://opensource.org/licenses/MIT).

## المراجع
[^1]: SafaSafari/jiagu_unpacker: [https://github.com/SafaSafari/jiagu_unpacker](https://github.com/SafaSafari/jiagu_unpacker)
[^2]: luoyesiqiu/dpt-shell: [https://github.com/luoyesiqiu/dpt-shell](https://github.com/luoyesiqiu/dpt-shell)
